{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Community Guide for theta-client","text":"<p>Full code on  GitHub ricohapi/theta-client.</p>"},{"location":"#quickstart","title":"Quickstart","text":"<p>For native Android and iOS</p> <ol> <li>Build <code>theta-client</code> first</li> <li>Copy <code>aar</code> file you built in the previous step into Android project</li> <li>Copy <code>XCFramework</code> into iOS project</li> <li>In <code>./demo/demo-android</code> build Android demo</li> <li> <p>In <code>./demo/demo-ios</code> build iOS demo</p> </li> <li> <p>demo-android full build process video walkthrough</p> </li> </ol>"},{"location":"#overview","title":"Overview","text":"<p><code>theta-client</code> is an open source library enabling rapid creation of mobile apps that control RICOH THETA cameras. The library works with Kotlin, Swift, Dart, and JavaScript.</p>"},{"location":"#demo-apps","title":"Demo Apps","text":"<p>Four open source demo applications are included:</p> <ul> <li>Android native with Kotlin</li> <li>iOS native with Swift</li> <li>React Native for iOS and Android builds</li> <li>Flutter for iOS and Android builds</li> </ul>"},{"location":"#documentation","title":"Documentation","text":"<p>Refer to theta-client documentation for the development platform you are using.</p> <ul> <li>Android</li> <li>iOS</li> <li>React Native</li> <li>Flutter</li> </ul> <p>In addition to documentation on theta-client, you can refer to the RICOH official Web API 2.1 documentation.</p>"},{"location":"#community-tips","title":"Community Tips","text":""},{"location":"#cannot-find-android_home-android","title":"cannot find ANDROID_HOME (Android)","text":"<p>You may need to specify the path of ANDROID_HOME in either an environmental variable or the <code>local.properties</code> file in the project root.</p> <p>Example <code>local.properties</code> on Linux.</p> <p><code>sdk.dir=/home/craig/Android/Sdk</code></p>"},{"location":"#zip-end-header-not-found-android","title":"zip END header not found (Android)","text":"<p>After you build theta-client, make sure that you copied <code>theta-client-debug.aar</code> into <code>theta-client\\demos\\demo-android\\app\\libs</code></p>"},{"location":"#react-native-run-pod-install-in-ios-folder","title":"React Native: run pod install in ios folder","text":"<p>For React Native, you may need to run <code>pod install</code> in the ios  folder inside of demo-react-native</p>"},{"location":"#minsdkversion-android","title":"minSdkVersion (Android)","text":"<p>If you build a new project, the <code>minSdkVersion</code> might be set to a lower number such as 16.  The plug-in requires a <code>minSdkVersion</code> of 26.</p> <p>In <code>android/app/build.gradle</code>, set to <code>minSdkVersion 26</code></p>"},{"location":"#getting-help","title":"Getting Help","text":"<p>Open an issue on GitHub. </p>"},{"location":"android/","title":"Running demo-android","text":"<p>Native Android Kotlin build.</p>"},{"location":"android/#tutorial-resources","title":"tutorial resources","text":"<ul> <li>YouTube: Android demo complete build and install</li> <li>YouTube: Improved Android live preview for SC2</li> <li>includes full build process again</li> </ul>"},{"location":"android/#build-theta-client","title":"build theta-client","text":"<ol> <li>clone theta-client repo from https://github.com/ricohapi/theta-client.git</li> <li>cd into theta-client</li> <li>build theta-client aar</li> </ol> <pre><code>git clone https://github.com/ricohapi/theta-client.git\ncd theta-client\n./gradlew publishToMavenLocal\n\nStarting a Gradle Daemon (subsequent builds will be faster)\n&lt;--\n...\n...\n\nBUILD SUCCESSFUL in 31s\n59 actionable tasks: 59 executed\n</code></pre>"},{"location":"android/#build-demo-android","title":"build demo-android","text":"<p>Open <code>demos/demo-android</code> in Android Studio.</p> <p>I'm using Electric Eel for this test.</p> <p></p> demo-android in Android Studio Electric Eel <p>Press run in Android Studio.</p> <p></p> Press run to build and install <p>When the build is successful, it will appear in the Android Virtual Devices (AVD).</p> <p></p> Running in Pixel 4 AVD"},{"location":"android/#take-pictures","title":"Take Pictures","text":"<p>Connect your workstation to the RICOH THETA camera. The password is the numerical digits of the serial number.</p> <p></p> Connect workstation to RICOH THETA as hotspot <p>Press Take a photo button to see a live preview. Press the teal shutter button to take the picture.</p> <p></p> live preview shown prior to taking picture"},{"location":"camera_compare/","title":"Model Comparison","text":"<p>The THETA X can shoot an 11K image compared to the 5.4K image of the SC2.</p> <p>To take advantage of the higher-resolution images of the THETA X, developers may wish to optimize the viewer and enable zoom for high-detail areas such as the climate control and media center.</p> <p></p> 5x zoom: THETA X (left) and THETA SC2 (right)"},{"location":"camera_compare/#original-images-used-in-test","title":"Original Images Used in Test","text":"<ul> <li>RICOH THETA X 11K, auto-HDR</li> <li>RICOH THETA SC2 5.4K, auto-HDR</li> </ul>"},{"location":"camera_compare/#4x-zoom","title":"4x zoom","text":"<p>In the following example, both images are zoomed 4x. Developers can enable pinch-to-zoom or set a preset zoom. This example shows a preset zoom.</p> <p>The client control knob features are easier to identify in the THETA X (left image).</p> <p></p> 4x zoom: THETA X (left) and THETA SC2 (right)"},{"location":"camera_compare/#3x-zoom","title":"3x zoom","text":"<p>At 3x zoom, the differences are noticeable, but not as dramatic. The difference in the lighting is partially due the HDR capability of the THETA X.</p> <p></p> 3x zoom: THETA X (left) and THETA SC2 (right)"},{"location":"camera_compare/#2x-zoom","title":"2x zoom","text":"<p>The next set of examples show 2x zoom as a reasonable default zoom level for navigation.</p> <p></p> 2x zoom: THETA X (left) and THETA SC2 (right)  <p></p> 2x zoom: THETA X (left) and THETA SC2 (right)  <p></p> 2x zoom: THETA X (left) and THETA SC2 (right)  <p></p> 2x zoom: THETA X (left) and THETA SC2 (right)"},{"location":"compression/","title":"Lossy Image Compression","text":"<p>RICOH THETA X 11K image, auto-HDR</p> lossy compression file size original JPEG 11.2 MB 50% quality, webp format 2.0 MB 30% quality, webp format 1.4 MB"},{"location":"compression/#original-images-used-in-test","title":"Original Images Used in Test","text":"<ul> <li>RICOH THETA X 11K, auto-HDR</li> <li>RICOH THETA SC2 5.4K, auto-HDR</li> </ul>"},{"location":"compression/#2mb-11k-theta-x-image-vs-42mb-54k-sc2-image","title":"2MB 11K THETA X Image vs 4.2MB 5.4K SC2 Image","text":"lossy compression: THETA X 2MB file size (left) and THETA SC2 5.4K, 4.2MB file size(right)"},{"location":"compression/#14mb-11k-theta-x-image-vs-42mb-54k-sc2-image","title":"1.4MB 11K THETA X Image vs 4.2MB 5.4K SC2 Image","text":"lossy compression: THETA X 1.4MB file size (left) and THETA SC2 5.4K, 4.2MB file size(right)"},{"location":"compression/#3x-zoom-14mb-11k-theta-x-image-vs-42mb-54k-sc2-image","title":"3x zoom: 1.4MB 11K THETA X Image vs 4.2MB 5.4K SC2 Image","text":"lossy compression: THETA X 1.4MB file size (left) and THETA SC2 5.4K, 4.2MB file size(right)  lossy compression: THETA X 1.4MB file size (left) and THETA SC2 5.4K, 4.2MB file size(right)"},{"location":"compression/#metadata","title":"metadata","text":"<p>metadata is preserved in the compression process to convert the THETA X 11.2MB file into a 1.4MB file.</p> <pre><code>ExifTool Version Number         : 12.40\nFile Name                       : X_30compressed.webp\nDirectory                       : .\nFile Size                       : 1350 KiB\nFile Modification Date/Time     : 2023:03:09 13:51:41-08:00\nFile Access Date/Time           : 2023:03:09 13:57:31-08:00\nFile Inode Change Date/Time     : 2023:03:09 13:51:41-08:00\nFile Type                       : WEBP\nFile Type Extension             : webp\nMIME Type                       : image/webp\nProfile CMM Type                : Little CMS\nProfile Version                 : 4.3.0\nProfile Class                   : Display Device Profile\nColor Space Data                : RGB\nProfile Connection Space        : XYZ\nProfile Date Time               : 2023:03:09 21:49:38\nProfile File Signature          : acsp\nPrimary Platform                : Apple Computer Inc.\nCMM Flags                       : Not Embedded, Independent\nDevice Attributes               : Reflective, Glossy, Positive, Color\nRendering Intent                : Perceptual\nConnection Space Illuminant     : 0.9642 1 0.82491\nProfile Creator                 : Little CMS\nProfile Copyright               : Public Domain\nMedia White Point               : 0.9642 1 0.82491\nChromatic Adaptation            : 1.04788 0.02292 -0.05022 0.02959 0.99048 \n                                    -0.01707 -0.00925 0.01508 0.75168\nRed Matrix Column               : 0.43604 0.22249 0.01392\nBlue Matrix Column              : 0.14305 0.06061 0.71393\nGreen Matrix Column             : 0.38512 0.7169 0.09706\nChromaticity Channels           : 3\nChromaticity Channel 1          : 0.64 0.33002\nChromaticity Channel 2          : 0.3 0.60001\nChromaticity Channel 3          : 0.15001 0.06\nDevice Model Desc               : sRGB\nVP8 Version                     : 0 (bicubic reconstruction, normal loop)\nImage Width                     : 11008\nImage Height                    : 5504\nExif Byte Order                 : Little-endian (Intel, II)\nBits Per Sample                 : 8 8 8\nMake                            : RICOH\nCamera Model Name               : RICOH THETA X\nOrientation                     : Horizontal (normal)\nX Resolution                    : 300\nY Resolution                    : 300\nResolution Unit                 : inches\nModify Date                     : 2023:03:09 13:51:24\nY Cb Cr Positioning             : Centered\nExposure Time                   : 1/13\nF Number                        : 2.4\nExposure Program                : Program AE\nISO                             : 80\nSensitivity Type                : Standard Output Sensitivity\nExif Version                    : 0231\nDate/Time Original              : 2022:08:23 16:50:02\nCreate Date                     : 2022:08:23 16:50:02\nOffset Time                     : +09:00\nOffset Time Original            : +09:00\nOffset Time Digitized           : +09:00\nComponents Configuration        : Y, Cb, Cr, -\nExposure Compensation           : 0\nMax Aperture Value              : 2.3\nMetering Mode                   : Multi-segment\nLight Source                    : Unknown\nFlash                           : Unknown (0x32)\nFocal Length                    : 1.4 mm\nFlashpix Version                : 0100\nColor Space                     : sRGB\nExif Image Width                : 11008\nExif Image Height               : 5504\nExposure Mode                   : Auto\nWhite Balance                   : Auto\nScene Capture Type              : Standard\nSharpness                       : Normal\nGPS Version ID                  : 2.3.0.0\nGPS Latitude Ref                : North\nGPS Longitude Ref               : East\nGPS Altitude Ref                : Below Sea Level\nGPS Time Stamp                  : 07:49:57\nGPS Status                      : Measurement Active\nGPS Measure Mode                : 3-Dimensional Measurement\nGPS Dilution Of Precision       : 4.98\nGPS Speed Ref                   : km/h\nGPS Speed                       : 0.375\nGPS Track Ref                   : Unknown ()\nGPS Track                       : undef\nGPS Img Direction Ref           : Magnetic North\nGPS Map Datum                   : WGS-84\nGPS Processing Method           : INT\nGPS Date Stamp                  : 2022:08:23\nXMP Toolkit                     : XMP Core 4.4.0-Exiv2\nFormat                          : image/webp\nApi                             : 2.0\nTime Stamp                      : 1678398701881200\nCropped Area Image Height Pixels: 5504\nCropped Area Image Width Pixels : 11008\nFull Pano Height Pixels         : 5504\nFull Pano Width Pixels          : 11008\nProjection Type                 : equirectangular\nUse Panorama Viewer             : True\nMetadata Date                   : 2023:03:09T13:51:24:08:00\nHistory Action                  : saved\nHistory When                    : 2023:03:09 13:51:41-08:00\nAperture                        : 2.4\nImage Size                      : 11008x5504\nMegapixels                      : 60.6\nShutter Speed                   : 1/13\nCreate Date                     : 2022:08:23 16:50:02+09:00\nDate/Time Original              : 2022:08:23 16:50:02+09:00\nModify Date                     : 2023:03:09 13:51:24+09:00\nGPS Altitude                    : 5.8 m Below Sea Level\nGPS Date/Time                   : 2022:08:23 07:49:57Z\nGPS Latitude                    : 35 deg 35' 52.20\" N\nGPS Longitude                   : 139 deg 42' 22.15\" E\nFocal Length                    : 1.4 mm\nGPS Position                    : 35 deg 35' 52.20\" N, 139 deg 42' 22.15\" E\nLight Value                     : 6.5\n</code></pre>"},{"location":"compression/#demo-of-14mb-theta-x-11k-image","title":"Demo of 1.4MB THETA X 11K Image","text":"lossy compression: THETA X 1.4MB file size"},{"location":"flutter/","title":"Flutter","text":"<p>Official RICOH demo-flutter</p>"},{"location":"flutter/#community-video-tutorials","title":"Community Video Tutorials","text":"<ul> <li>theta-client new Flutter App from the beginning - blank editor to Android app - published March 2, 2023</li> <li>Equirectangular to 360 Image in Flutter  with Panorama Package - published February 21, 2023</li> <li>RICOH theta-client Flutter Build on Windows - published Feb 8, 2023.</li> </ul>"},{"location":"flutter/#environment","title":"Environment","text":"<p>At the time of writing, the main branch is 16 commits ahead of release 1.0.0. The configuration process may have changed. This tutorial is based on version 1.0.0 of theta-client, the most recent release.</p>"},{"location":"flutter/#checkout-and-build-100","title":"checkout and build 1.0.0","text":"<pre><code>git clone https://github.com/ricohapi/theta-client.git\ncd theta-client\ngit tag\n 1.0.0\ngit checkout 1.0.0\n Note: switching to '1.0.0'.\ngit switch -c release.1.0.0\n Switched to a new branch 'release.1.0.0'\n./gradlew publishToMavenLocal\n</code></pre>"},{"location":"flutter/#building-a-new-app-on-windows","title":"Building a New App on Windows","text":"<ol> <li>build theta-client</li> <li>copy <code>theta-client/kotlin-multiplatform/build/outputs/aar/*.aar</code> into <code>theta-client/flutter/android/aar</code> <code>theta-client/flutter/android/aar</code> new Flutter project</li> <li>create new Flutter project (example <code>theta_tutorial</code>)</li> <li>copy <code>theta-client/flutter/*</code> into <code>theta_tutorial/packages/theta_client_flutter/</code></li> <li>add plugin to <code>pubspec.yaml</code></li> <li>set min sdk and dependency in <code>build.gradle</code> (Android)</li> </ol>"},{"location":"flutter/#pubspecyaml-configuration","title":"<code>pubspec.yaml</code> configuration","text":"<pre><code>dependencies:\nflutter:\nsdk: flutter\ntheta_client_flutter:\npath: ./packages/theta_client_flutter\n</code></pre>"},{"location":"flutter/#buildgradle-android","title":"<code>build.gradle</code> (Android)","text":"<p>in <code>theta_tutorial/android/app/build.gradle</code></p> <pre><code>dependencies {\n...\nimplementation files('../../packages/theta_client_flutter/android/aar/theta-client-debug.aar')\n...\n}\n</code></pre> <p>Set MinSdkVersion to 26</p> <pre><code>MinSdkVersion 26\n</code></pre>"},{"location":"flutter/#change-equirectangular-image-to-360-navigation-view-flutter","title":"Change Equirectangular Image to 360 Navigation View (Flutter)","text":"<p>Oppkey uses panorama.</p> <p>video tutorial</p> <p>After taking a picture, the post-view is also in equirectangular.</p> <p></p> <p>Add Panorama package.</p> <pre><code>PS C:theta-client\\demos\\demo-flutter&gt; flutter pub add panorama\nResolving dependencies...\n</code></pre> <p>Your dependencies will look like this:</p> <pre><code>dependencies:\nflutter:\nsdk: flutter\ntheta_client_flutter:\npath: ./packages/theta_client_flutter\n# The following adds the Cupertino Icons font to your application.\n# Use with the CupertinoIcons class for iOS style icons.\ncupertino_icons: ^1.0.2\nvideo_player: ^2.4.10\npanorama: ^0.4.1\n</code></pre> <p>In <code>lib/photo_screen.dart</code>, go to line 19 and wrap with Panorama.</p> <p></p> <p></p> <p>If you don't have auto-import, the <code>Panorama</code> widget will initially be red.</p> <p></p> <p>On VS Code, use ctrl-. to open up the auto-import menu.  </p> <p></p> <p>Hot restart</p> <p>Select a file from list view.</p> <p></p> <p>View in 360.</p> <p></p>"},{"location":"flutter/#build-flutter-on-windows-for-android","title":"Build Flutter on Windows for Android","text":"<p>After building <code>theta-client</code>, inspect <code>theta-client/scripts/build-flutter-build.sh</code></p> <p>The key part is:</p> <p><code>cp -f ./kotlin-multiplatform/build/outputs/aar/*.aar ./flutter/android/aar/</code></p> <p>On PowerShell, copy the <code>*.aar</code> files into <code>./flutter/android/aar</code></p> <pre><code>```text\nPS C:theta-client&gt; copy .\\kotlin-multiplatform\\build\\outputs\\aar\\*.aar .\\flutter\\android\\aar\\\nPS C:theta-client&gt; cd .\\flutter\\android\\aar\\\nPS C:theta-client\\flutter\\android\\aar&gt; ls\n\n    Directory: C:\\Users\\craig\\Documents\\Development\\ricoh\\2023\\theta-client\\flutter\\android\\aar\n\nMode                 LastWriteTime         Length Name\n----                 -------------         ------ ----\n-a----         2/24/2023  12:38 PM              0 .gitkeep\n-a----         2/24/2023  12:40 PM         954368 theta-client-debug.aar\n-a----         2/24/2023  12:40 PM         906203 theta-client-release.aar\n</code></pre> <p>In <code>demo-flutter\\packages</code>, delete the file <code>theta_client_flutter</code> and replace with a new folder called <code>theta_client_flutter</code></p> <p></p> <p>Copy the contents <code>.\\flutter</code> into the new <code>theta_client_flutter</code> folder.</p> <p></p> <p>In <code>demo-flutter</code>, run <code>flutter pub get</code></p> <pre><code>```text\nPS C:theta-client\\demos\\demo-flutter&gt; flutter pub get\nRunning \"flutter pub get\" in demo-flutter...\nResolving dependencies... (1.1s)\n&gt; async 2.10.0 (was 2.9.0)\n&gt; boolean_selector 2.1.1 (was 2.1.0)\n  characters 1.2.1 (1.3.0 available)\n&gt; collection 1.17.0 (was 1.16.0) (1.17.1 available)\n&gt; js 0.6.5 (was 0.6.4) (0.6.7 available)\n&gt; matcher 0.12.13 (was 0.12.12) (0.12.14 available)\n&gt; material_color_utilities 0.2.0 (was 0.1.5)\n  meta 1.8.0 (1.9.0 available)\n  path 1.8.2 (1.8.3 available)\n  plugin_platform_interface 2.1.3 (2.1.4 available)\n&gt; source_span 1.9.1 (was 1.9.0)\n&gt; stack_trace 1.11.0 (was 1.10.0)\n&gt; stream_channel 2.1.1 (was 2.1.0)\n&gt; string_scanner 1.2.0 (was 1.1.1)\n&gt; test_api 0.4.16 (was 0.4.12) (0.4.18 available)\n&gt; vector_math 2.1.4 (was 2.1.2)\n  video_player 2.4.10 (2.5.2 available)\n  video_player_android 2.3.10 (2.3.11 available)\n  video_player_avfoundation 2.3.8 (2.3.9 available)\n  video_player_platform_interface 6.0.1 (6.0.2 available)\n  video_player_web 2.0.13 (2.0.14 available)\nChanged 12 dependencies!\nPS C:theta-client\\demos\\demo-flutter&gt;\n</code></pre> <p>Start an Android emulator.</p> <p>Run the Flutter application on the emulator.</p> <pre><code>```text\nPS C:theta-client\\demos\\demo-flutter&gt; flutter run -d emulator-5554\nLaunching lib\\main.dart on sdk gphone64 x86 64 in debug mode...\nRunning Gradle task 'assembleDebug'...                             80.8s\n\u2713  Built build\\app\\outputs\\flutter-apk\\app-debug.apk.\nInstalling build\\app\\outputs\\flutter-apk\\app-debug.apk...        2,451ms\nSyncing files to device sdk gphone64 x86 64...                     172ms\n...\n\ud83d\udcaa Running with sound null safety \ud83d\udcaa\n</code></pre> <p>Unless your computer is already connected to a RICOH THETA camera, you will see Initialize error.  </p> <p></p> <p>Connect Windows computer to camera.</p> <p></p> <p></p> <p>After pressing take picture, the live preview will appear.</p> <p></p>"},{"location":"flutter/#troubleshooting","title":"Troubleshooting","text":""},{"location":"flutter/#failed-resolution-of-lcomricoh360thetaclientthetarepository-flutter-android-when-using-theta-client-version-100","title":"Failed resolution of: Lcom/ricoh360/thetaclient/ThetaRepository; (Flutter, Android) when using theta-client version 1.0.0","text":"<p>In <code>flutter_project_root/android/app/build.gradle</code>, specify <code>theta-client-debug.aar</code> in the dependencies.</p> <pre><code>dependencies {\nimplementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\nimplementation files('../../packages/theta_client_flutter/android/aar/theta-client-debug.aar')\n}\n</code></pre> <p>As of April 2023, do not add add the line</p> <pre><code>// line below is not needed as of April 2023.\nimplementation files('../../packages/theta_client_flutter/android/aar/theta-client-debug.aar')\n</code></pre> <p>In <code>demo-flutter/android/build.gradle</code>, add the line <code>mavenLocal()</code></p> <pre><code>allprojects {\nrepositories {\nmavenLocal()\ngoogle()\nmavenCentral()\n}\n}\n</code></pre>"},{"location":"flutter/#demonstration-of-live-preview-with-360-navigation","title":"Demonstration of Live Preview with 360 Navigation","text":"livePreview with navigation"},{"location":"how-to-install-nodejs/","title":"How to Install Node.js on Windows","text":"<ol> <li> <p>Download the nvm-setup.exe in the link below</p> <p>NVM for Windows Download</p> <p></p> </li> <li> <p>Run the nvm-setup.exe by clicking on it and follow the on screen setup instructions</p> </li> <li> <p>Check if you installed NVM sucessfully by using the command <code>nvm --version</code></p> <p></p> </li> <li> <p>To install Node.js with nvm you can now run <code>nvm install lts</code> to install the long term support version of node</p> <p></p> </li> <li> <p>Check which versions of node you have then use it as shown with <code>nvm list</code> and then <code>nvm use</code> make sure you are in administrator mode</p> <p></p> </li> <li> <p>Check if node is working by running <code>node --version</code></p> <p></p> </li> </ol>"},{"location":"how-to-setup-android-emulator/","title":"How To Setup the Android Emulator","text":"<ol> <li> <p>Open up Android Studio</p> </li> <li> <p>Click on Tools then Device Manager</p> <p></p> </li> <li> <p>In the Virtual tab press on Create Device</p> <p></p> </li> <li> <p>Select the device and image, the one that works for me is the <code>pixel 4</code> with google play store capabilities and the <code>tiramisu</code> image, you may need to press on the download icon for the <code>image</code></p> <p></p> <p></p> </li> <li> <p>Once you are on the last screen press <code>finish</code> and let android studio setup your emulator, then you are done!</p> </li> </ol>"},{"location":"react-native-install/","title":"React Native RICOH THETA Demo Installation Guide for Windows","text":""},{"location":"react-native-install/#overview","title":"Overview","text":"<p>This section covers the installation process for React Native on Windows 11 so that we can run the <code>demo-react-native</code>. Another section will cover the installation for macOS.</p> <p>For this installation you will need to install Node.js if you haven't already.</p> <p>There will be videos and links in the resource section for the installation of node.js on your computer. This article also covers how to build the <code>theta-client</code> and make it available to <code>demo-react-native</code>, as well as building the <code>demo-react-native</code> and running it on an Android emulator.</p> <p>The results will be shown using the THETA X running the <code>demo-react-native</code>  using the THETA API.</p>"},{"location":"react-native-install/#general-steps-to-run-react-native-demo-on-windows","title":"General Steps to run React Native Demo on Windows","text":"<ol> <li>Build the <code>theta-client</code> and make it available to <code>demo-react-native</code></li> <li>Build <code>demo-react-native</code></li> <li>Test the <code>demo-react-native</code> build on THETA X with an emulator</li> <li>Test all demo features: List Files, Take Photo</li> </ol>"},{"location":"react-native-install/#resources","title":"Resources","text":"<ul> <li> <p>GITHUB React Native demo for theta-client</p> </li> <li> <p>VIDEO theta-client React Native full build tutorial and demonstration</p> </li> <li> <p>VIDEO HowTo Install nvm, node, npm and yarn on Windows 11</p> </li> </ul>"},{"location":"react-native-install/#work-environment","title":"Work Environment","text":"Dell XPS 13 Details CPU Intel(R) Core(TM) i7-10710U CPU @ 1.10GHz   1.61 GHz RAM 16.0 GB OS Windows 11 Home <ul> <li>THETA X running firmware 1.41.0</li> </ul>"},{"location":"react-native-install/#requirements","title":"Requirements","text":"<ul> <li> <p>Android Studio</p> <p>Needed for the SDK and Emulator Setup</p> </li> <li> <p>Java 11</p> </li> <li> <p>Node JS</p> </li> <li> <p>Recommend to Install with NVM for Windows. Process is shown below in Node JS Section.</p> </li> </ul>"},{"location":"react-native-install/#command-line-steps","title":"Command Line Steps","text":""},{"location":"react-native-install/#first-command-clone-the-repo","title":"First Command - Clone the Repo","text":"<p>with  <code>git clone https://github.com/ricohapi/theta-client.git</code></p> <p></p>"},{"location":"react-native-install/#second-command-go-into-theta-client-directory","title":"Second Command -  Go into  theta-client directory","text":"<p>with <code>cd theta-client</code></p> <p></p>"},{"location":"react-native-install/#third-command-build-gradlew","title":"Third Command - Build Gradlew","text":"<p>with <code>./gradlew publishToMavenLocal podPublishXCFramework</code> but I have an Error, the problem is the SDK location is not found. My solution is to set the environment variable of the SDK.</p> <p></p>"},{"location":"react-native-install/#steps-to-fix-for-build-failure","title":"Steps to Fix for Build Failure","text":"<ol> <li> <p>Search for env</p> <p></p> </li> <li> <p>Click on environmental variables</p> <p></p> </li> <li> <p>New User Variable and Type in the Variable name <code>ANDROID_HOME</code> and set the path <code>C:\\Users\\UserName\\AppData\\Local\\Android\\Sdk</code></p> <p></p> <p>By default the path to the SDK usually is <code>C:\\Users\\UserName\\AppData\\Local\\Android\\Sdk</code> , Copy the Path substituting for your <code>UserName</code></p> <p></p> </li> <li> <p>Restart your terminal by closing and relaunching it before trying out the <code>gradlew</code> build command again</p> </li> </ol>"},{"location":"react-native-install/#command-line-steps-continued","title":"Command Line Steps Continued","text":"<p>Retry Third Command - Try the Build Gradlew command again <code>./gradlew publishToMavenLocal podPublishXCFramework</code></p> <p></p> <p>Screenshot below shows its successful </p>"},{"location":"react-native-install/#fourth-command-set-the-environment-variable-of-theta_client","title":"Fourth Command - Set the environment variable of THETA_CLIENT","text":"<p>with the process shown above using the Windows Environment Variable Editor.</p> <p><code>Variable Name : THETA_CLIENT</code></p> <p><code>Variable Path : C:\\Users\\Erik Rodriguez\\Projects\\theta-client</code></p> <p>Substitute the variable path for your local path to <code>theta-client</code></p> <p></p> <p>Check if it sucessfully set the variable with <code>echo $Env:THETA_CLIENT</code> it should return the path of the THETA_CLIENT variable if set correctly</p> <p></p>"},{"location":"react-native-install/#fifth-command-go-into-react-native-directory","title":"Fifth Command - Go into react-native directory","text":"<p>with <code>cd react-native</code></p> <p></p>"},{"location":"react-native-install/#sixth-command-run-bash-mkpackagesh","title":"Sixth Command - run <code>bash ./mkpackage.sh</code>","text":"<p>and as it appears we have errors to fix</p> <p></p> <p>To fix the mkpackage error:</p> <p>You need to Convert your file to Unix format. This is one way to do it and there may be other ways.</p> <ol> <li> <p>Open up the VSCode editor, install it if you don't have it</p> </li> <li> <p>Open the file called <code>mkpackage.sh</code> in the <code>theta-client\\react-native</code> directory</p> </li> <li> <p>Convert the <code>mkpackage.sh</code> file <code>CRLF</code> to <code>LF</code> by clicking on the bottom right <code>CRLF</code> button and changing it to <code>LF</code> as shown</p> <p></p> </li> <li> <p>Save the file by pressing <code>ctrl-s</code> and you should be good to go!</p> </li> </ol> <p>Retry Sixth Command - run <code>bash ./mkpackage.sh</code></p> <p></p> <p>Go into the <code>demo-react-native</code> folder as shown below from the root directory <code>theta-client</code></p> <pre><code>cd demos\ncd demo-react-native\n</code></pre> <p></p> <p>Once you are in <code>theta-client\\demos\\demo-react-native</code> follow the next step</p>"},{"location":"react-native-install/#seventh-command-run-yarn-install","title":"Seventh command - run <code>yarn install</code>","text":"<p>if you dont have yarn downloaded on your computer already then you need to get it by running <code>npm install --global yarn</code></p> <p>Note 1: May need to run Powershell in administrator mode if command isn't working</p> <p>Note 2: May need to Install <code>Node.js</code> if your <code>npm</code> command isn't working which is shown in the Node.js  section</p> <p></p> <p></p> <p></p>"},{"location":"react-native-install/#time-to-run-the-demo-on-android","title":"Time to Run the Demo on Android","text":"<p>Now that we've sucesfully installed the required tools and setup. In the directory of <code>theta-client\\demos\\demo-react-native</code> use the command <code>yarn run android</code> to start your app in an Android emulator. Process shown in this Android Emulator Section to setup this emulator before running this command.</p> <p></p> <p></p>"},{"location":"react-native-mac/","title":"React native mac","text":""},{"location":"react-native-mac/#react-native-mac-setup","title":"React Native Mac Setup","text":""},{"location":"react-native-mac/#overview","title":"Overview","text":"<p>This section will cover the basics of installing React Native on macOS.  It will also cover the preparation of the react-native demo.</p> <p>Use the README.md file here: https://github.com/ricohapi/theta-client/tree/main/react-native</p>"},{"location":"react-native-mac/#community-video-tutorials","title":"Community Video Tutorials","text":"<p>theta-client React Native full build tutorial and demonstration - published February 4, 2023</p>"},{"location":"react-native-mac/#general-steps-to-run-react-native-demo-on-mac","title":"General Steps to run React Native Demo on Mac","text":"<ol> <li>Build <code>theta-client</code></li> <li>Export enviromental variable</li> <li>Prepare React Native wrapper</li> </ol>"},{"location":"react-native-mac/#work-environment","title":"Work Environment","text":"<p>(table)</p>"},{"location":"react-native-mac/#react-native-install-on-mac","title":"React Native install on Mac","text":""},{"location":"react-native-mac/#requirements","title":"Requirements","text":""},{"location":"react-native-mac/#command-line-steps","title":"Command Line Steps","text":""},{"location":"react-native-mac/#steps-to-fix-for-build-failure","title":"Steps to Fix for Build Failure","text":""},{"location":"react-native-mac/#command-line-steps-continued","title":"Command Line Steps Continued","text":""},{"location":"verify_image/","title":"Verifying Images","text":"<p>The RICOH THETA X can take 11K and 5.5 images.</p> model resolution width and height approx megapixels approx file size THETA X 11K 11008 \u00d7 5504 60 megapixels 9MB - 12MB THETA X 5.5K 5504 \u00d7 2752 15 megapixels 3.5 - 4.5MB SC2 5.4K 5376\u00d72688 14 megapixels 3 - 4.4MB"},{"location":"verify_image/#file-size","title":"File Size","text":"<p>You can use the file size to quickly see the expected resolution.</p> <p></p> THETA X: green is 5.5K and red is 11K"},{"location":"verify_image/#windows-properties","title":"Windows Properties","text":"<p>On Windows, you can right-click on the image file to see properties.</p> <p></p> SC2 image properties seen on Windows 11"},{"location":"verify_image/#metadata","title":"metadata","text":"<p>Access image metadata to get detailed information in the image. This example shows the use of ExifTool on Windows 11. With the command <code>exiftool.exe [name_of_file.JPG]</code>, the camera model (RICOH THETA X), firmware version of the camera (1.41.0) and image size (11008x5504) can quickly be reviewed.</p> <pre><code>PS C:&gt; exiftool.exe .\\R0070093.JPG\nExifTool Version Number         : 12.41\nFile Name                       : R0070093.JPG\nFile Size                       : 9.9 MiB\nFile Type                       : JPEG\nFile Type Extension             : jpg\nMIME Type                       : image/jpeg\nExif Byte Order                 : Big-endian (Motorola, MM)\nMake                            : RICOH\nCamera Model Name               : RICOH THETA X\nOrientation                     : Horizontal (normal)\nSoftware                        : RICOH THETA X Ver 1.41.0\nXMP Toolkit                     : RICOH THETA X Ver 1.41.0\nProjection Type                 : equirectangular\nUse Panorama Viewer             : True\nCropped Area Image Width Pixels : 11008\nCropped Area Image Height Pixels: 5504\nFull Pano Width Pixels          : 11008\nFull Pano Height Pixels         : 5504\nImage Width                     : 11008\nImage Height                    : 5504\nEncoding Process                : Baseline DCT, Huffman coding\nBits Per Sample                 : 8\nColor Components                : 3\nY Cb Cr Sub Sampling            : YCbCr4:2:0 (2 2)\nAperture                        : 2.4\nImage Size                      : 11008x5504\nMegapixels                      : 60.6\nShutter Speed                   : 1/20\n</code></pre>"},{"location":"verify_image/#verify-hdr","title":"verify HDR","text":"<p>To verify that that image is in HDR, use the -v option for exiftool and inspect the MakerNotes <code>Ricoh_ThetaSubdir_0x0002</code>.</p> <p>A value of 1 indicates HDR.  A value of 0 indicates non-HDR.</p>"},{"location":"verify_image/#example-with-hdr","title":"Example with HDR","text":"<p><code>Ricoh_ThetaSubdir_0x0002</code> is <code>1</code>.</p> <pre><code>PS C:&gt; exiftool.exe -v .\\R0070093.JPG\n  | | 18) MakerNoteRicoh (SubDirectory) --&gt;\n  | | + [MakerNotes directory with 8 entries]\n  | | | 0)  MakerNoteType = Rdc\n  | | | 1)  FirmwareVersion = 0x00\n  | | | 2)  Ricoh_0x0003 = 8580\n  | | | 3)  SerialNumber = 14010001\n  | | | 4)  RecordingFormat = 255\n  | | | 5)  WhiteBalance = 0\n  | | | 6)  ColorTempKelvin = 0\n  | | | 7)  ThetaSubdir (SubDirectory) --&gt;\n  | | | + [MakerNotes directory with 48 entries]\n  | | | | 0)  Ricoh_ThetaSubdir_0x0001 = 1\n  | | | | 1)  Ricoh_ThetaSubdir_0x0002 = 1\n</code></pre>"},{"location":"verify_image/#example-with-non-hdr","title":"Example with non-HDR","text":"<pre><code>PS C:&gt; exiftool -v .\\R0070094.JPG\n  | | 18) MakerNoteRicoh (SubDirectory) --&gt;\n  | | + [MakerNotes directory with 8 entries]\n  | | | 0)  MakerNoteType = Rdc\n  | | | 1)  FirmwareVersion = 0x00\n  | | | 2)  Ricoh_0x0003 = 8580\n  | | | 3)  SerialNumber = 14010001\n  | | | 4)  RecordingFormat = 255\n  | | | 5)  WhiteBalance = 0\n  | | | 6)  ColorTempKelvin = 0\n  | | | 7)  ThetaSubdir (SubDirectory) --&gt;\n  | | | + [MakerNotes directory with 48 entries]\n  | | | | 0)  Ricoh_ThetaSubdir_0x0001 = 1\n  | | | | 1)  Ricoh_ThetaSubdir_0x0002 = 0\n</code></pre>"},{"location":"verify_image/#camera-body-screen","title":"Camera Body Screen","text":"<p>HDR is off. Swipe up from the bottom of screen to see this menu. Use a partial swipe.  A full swipe will show a different menu.</p> <p></p> THETA X is not in HDR  <p>On the camera screen, HDR is set with Option.</p> <p></p> HDR can be set touchscreen in addition to API  <p>When HDR is enabled, the letters HDR will appear on the screen.</p> <p></p> HDR is enabled"},{"location":"flutter/new-project-on-linux/","title":"New Flutter Android Project on Linux","text":"<p>Using theta-client v1.0.0.</p>"},{"location":"flutter/new-project-on-linux/#create-new-project","title":"create new project","text":"<pre><code>flutter create --platforms=android -a kotlin theta_mini\nCreating project theta_mini...\ncd theta_mini/\nmkdir packages\nmkdir packages/theta_client_flutter\n</code></pre>"},{"location":"flutter/new-project-on-linux/#copy-theta-client-package","title":"copy theta-client package","text":""},{"location":"flutter/new-project-on-linux/#add-theta-client-to-android","title":"add theta-client to android","text":"<p>In <code>packages/theta_client_flutter/android/aar</code>, copy the <code>.aar</code> files that were built in the theta-client package build step.</p> <p>The aar files are in <code>theta-client/kotlin-multiplatform/build/outputs</code></p> <p></p> <p>This is what the aar files look like in VS Code.</p> <p></p>"},{"location":"flutter/new-project-on-linux/#configure-flutter","title":"configure Flutter","text":"<p>In <code>pubspec.yaml</code>, add the theta-client package as a dependency.</p> <pre><code>dependencies:\nflutter:\nsdk: flutter\ntheta_client_flutter:\npath: ./packages/theta_client_flutter\n</code></pre>"},{"location":"flutter/new-project-on-linux/#configure-android-build","title":"configure Android build","text":"<p>This step is only needed in version 1.0.0.  As of April 5, 2023, do not add the local <code>aar</code> file to the dependencies if you cloned from the main branch.</p> <p>In <code>android/app/build.gradle</code>, make the following changes (only if used v1.0.0)</p> <pre><code>if (flutterRoot == null) {\nthrow new FileNotFoundException(\"Flutter not found. Add flutter.sdk in local.properties.\")\n}\n...\n...\ndefaultConfig {\napplicationId \"com.oppkey.theta_mini\"\nminSdkVersion 26\ndependencies {\nimplementation \"org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version\"\n// only add the line below on v.1.0.0.  As of April 2023, it is not needed on the \n// main branch\nimplementation files('../../packages/theta_client_flutter/android/aar/theta-client-debug.aar')    }    </code></pre>"},{"location":"flutter/new-project-on-linux/#test-flutter-app","title":"Test Flutter App","text":"<pre><code>import 'package:flutter/material.dart';\nimport 'package:theta_client_flutter/theta_client_flutter.dart';\nvoid main() {\nrunApp(\nMaterialApp(\nhome: Scaffold(\nappBar: AppBar(\ntitle: const Text('theta-client minimal'),\n),\nbody: const MiniApp(),\n),\n),\n);\n}\nclass MiniApp extends StatefulWidget {\nconst MiniApp({Key? key}) : super(key: key);\n@override\nState&lt;MiniApp&gt; createState() =&gt; _MiniAppState();\n}\nclass _MiniAppState extends State&lt;MiniApp&gt; {\nfinal _thetaClient = ThetaClientFlutter();\nString _mobilePlatform = 'device unknown';\nString _cameraInfo = 'unable to get camera info';\n@override\nvoid initState() {\nsuper.initState();\n_initializeTheta();\n}\nvoid _initializeTheta() async {\ntry {\nvar mobilePlatform = await _thetaClient.getPlatformVersion();\nawait _thetaClient.initialize();\nvar thetaInfo = await _thetaClient.getThetaInfo();\nsetState(() {\n_mobilePlatform = mobilePlatform ?? 'device unknown';\n_cameraInfo = '${thetaInfo.model}, FW ${thetaInfo.firmwareVersion},'\n'SN: ${thetaInfo.serialNumber}';\n});\n} catch (error) {\ndebugPrint(error.toString());\n}\n}\n@override\nWidget build(BuildContext context) {\nreturn Padding(\npadding: const EdgeInsets.all(20.0),\nchild: Column(\nmainAxisAlignment: MainAxisAlignment.start,\nchildren: [\nText(\n'Mobile Platform: $_mobilePlatform',\nstyle: const TextStyle(fontSize: 36),\n),\nconst SizedBox(\nheight: 40.0,\n),\nText(\n_cameraInfo,\nstyle: const TextStyle(fontSize: 36),\n)\n],\n),\n);\n}\n}\n</code></pre>"},{"location":"flutter/new-project-on-linux/#example-code-for-minimal-project","title":"Example Code for Minimal Project","text":"<ul> <li>theta_client_minimal</li> </ul>"},{"location":"flutter/new-project-on-linux/#troubleshooting","title":"Troubleshooting","text":"<p>If the build fails, make sure you have the <code>aar</code> files accessible in <code>packages/theta_client_flutter/android/aar</code></p> <pre><code>Launching lib/main.dart on sdk gphone64 x86 64 in debug mode...\nmain.dart:1\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:checkDebugAarMetadata'.\n&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\n   &gt; Failed to transform theta-client-debug.aar to match attributes {artifactType=android-aar-metadata}.\n</code></pre>"}]}